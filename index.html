<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>未来型カルテフォーム</title>
  <style>
    body {
      margin: 0;
      background: radial-gradient(ellipse at center, #0f2027, #203a43, #2c5364);
      font-family: 'Segoe UI', sans-serif;
      color: #e0f7fa;
      padding: 1em;
      display: flex;
      justify-content: center;
    }

    .card {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid #0ff;
      box-shadow: 0 0 20px #0ff55a;
      border-radius: 16px;
      padding: 1.5em;
      max-width: 500px;
      width: 100%;
    }

    h2 {
      font-size: 1.3em;
      color: #0ff;
      text-shadow: 0 0 5px #0ff, 0 0 10px #0ff;
      margin-bottom: 0.5em;
    }

    label {
      display: block;
      margin-bottom: 0.6em;
      font-weight: bold;
      color: #00ffff;
      text-shadow: 0 0 3px #00ffff;
    }

    input, select, textarea {
      width: 100%;
      padding: 0.5em;
      border-radius: 6px;
      border: 1px solid #00ffff;
      background: rgba(0, 0, 0, 0.4);
      color: #e0f7fa;
      box-shadow: 0 0 5px #00ffff66;
      margin-bottom: 1em;
      backdrop-filter: blur(3px);
    }

    input::placeholder,
    textarea::placeholder {
      color: #88cfd0;
    }

    .section-toggle {
      background: none;
      border: none;
      color: #0ff;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 0.5em;
    }

    .accordion {
      display: none;
      margin-top: 1em;
    }

    .stress-scale {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 1em;
    }

    .scale-box {
      width: 28px;
      height: 18px;
      border-radius: 3px;
      background: linear-gradient(to right, #00ffff, #0088ff);
      box-shadow: 0 0 6px #00ffffaa;
      border: none;
      cursor: pointer;
    }

    .scale-box.active {
      outline: 2px solid #fff;
    }

    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 14px;
      background: #0ff2;
      border-radius: 6px;
      outline: none;
      box-shadow: 0 0 5px #00ffff88;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      background: #00ffff;
      border-radius: 50%;
      box-shadow: 0 0 6px #0ff;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    input[type="range"]::-webkit-slider-thumb:active {
      transform: scale(1.2);
    }

    input[type="range"]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      background: #00ffff;
      border: none;
      border-radius: 50%;
      box-shadow: 0 0 6px #0ff;
      cursor: pointer;
    }

    @media (max-width: 600px) {
      .scale-box {
        width: 26px;
        height: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <h2>施術前カルテ</h2>

    <label>施術日:
      <input type="date" name="date" required />
    </label>

    <label>お名前:
      <input type="text" name="name" placeholder="例: 山田太郎" required />
    </label>

    <button type="button" class="section-toggle" onclick="toggleSection('complaints')">主訴を記録する</button>
    <div id="complaints" class="accordion">
      <label><input type="checkbox" name="symptom_group" value="body" /> カラダの不調</label>
      <small>肩こり、腰痛、目の疲れなど</small>
      <label><input type="checkbox" name="symptom_group" value="mental" /> メンタルの不調</label>
      <small>気分の浮き沈み、不安感、やる気が出ない</small>
      <label><input type="checkbox" name="symptom_group" value="autonomic" /> 自律神経の不調</label>
      <small>睡眠不足、食欲不振、生理不順など</small>
    </div>

    <label>お疲れの部位（複数選択可）:</label>
    <select name="fatigue_parts" multiple size="6">
      <option value="head">頭</option>
      <option value="neck">首</option>
      <option value="shoulders">肩</option>
      <option value="back">背中</option>
      <option value="waist">腰</option>
      <option value="legs">脚</option>
    </select>

    <label>ストレススケール（0〜10）: <span id="stressValue">0</span></label>
    <div class="stress-scale" id="stressButtons"></div>
    <input type="range" min="0" max="10" value="0" id="stressSlider" />

    <label>自由記入:</label>
    <textarea name="memo" rows="3" placeholder="気になることがあればご記入ください"></textarea>
  </div>

  <script>
    function toggleSection(id) {
      const sec = document.getElementById(id);
      sec.style.display = sec.style.display === 'block' ? 'none' : 'block';
    }

    const stressScale = document.getElementById("stressButtons");
    const stressSlider = document.getElementById("stressSlider");

    for (let i = 0; i <= 10; i++) {
      const box = document.createElement("div");
      box.classList.add("scale-box");
      if (i === 0) box.classList.add("active");
      box.dataset.value = i;
      box.addEventListener("click", () => {
        stressSlider.value = i;
        updateScale(i);
      });
      stressScale.appendChild(box);
    }

    stressSlider.addEventListener("input", () => {
      updateScale(stressSlider.value);
    });

    function updateScale(val) {
      document.querySelectorAll(".scale-box").forEach((box, idx) => {
        if (idx <= val) box.classList.add("active");
        else box.classList.remove("active");
      });
      document.getElementById("stressValue").innerText = val;
    }
  </script>
</body>
</html>